				Project Plan

Design:
New City subway authorities are performing a review on the current mass transmit system. They want to know how did the traffic pattern change compared to pre-Covid? 
Five questions are asked:
1. How did the Average weekday traffic pattern change?
2. How did the average weekend traffic change?
3. In terms of traffic pattern, which stations have the largest change? 
4. Which station need to install more turnstiles the most?
5.

basis? 
Which station  
Turnstile utilizations. The busiest and the slowest turnstiles. 

What are the most drastic changes in terms of station traffic?
We first combine all turnstiles counts that belong to the same station. Weekday traffic are combined into one weekday values, and weekend values are combined together. 

Then on a per station basis, the top 20 with the largest percentage change are listed, together with the top 20 with the largest traffic changes.


Jumping the turnstiles, total in traffic versus total out traffic, whole system,

total in total out in a station.

   
One of the questions they have is that if they should expanding their 
subway system, and where to expand.
One of the way to get data is to examine if there is a lot of existing transfer   

Data:
This study will use 1 week of MTA data in March across 12 consecutive years. The first 10 years are used establish the pre-covid pattern, while the data from last two years are used to indicate current trend. Standard statistics like mean and variance, for per day ingress and egress traffic, and peak ingress and egress data per 4 hour period will be used to draw the conclusions.

A total of 12 weeks of data will be used, which is close to 3 months of continious data. The first week of March is chosen due to it being in the school year instead of school break.

Algorithm: 
1. Cleaning
The SCP and UNIT column of the tables are used to uniquely identify the turnstiles in question. The per period ingress and egress traffic will be generated using the traffic counters of the same machine. Then a new table is generated, to aggregate the turnstiles 
in the same station into a per station values.

Here, the UNIT column is used to uniquely identify a station. 

2. 
The Per week data is checked for anomality in the various fields. Description field 
containing data other than "REGULAR" requires special attention 
saved into a csv file. SQLite will read this file, and generate a new file
consist of per. 
Then additional files at earlier time period will be read and appended to the existing databases to create the database with 12 years of data.


Tools:

Cleaning is done using pandas to read the raw text files, generate the per period traffic, and 
save back into a csv file to be read by SQLite, so each week of dta is saved into a file. 

The data format in the csv file is changed mm/dd/yyyy to YYYY-MM-DD to allow sorting by SQL while in the text format. 

Then cleaned data are read by SQLite. It is aggregated over the station and used to generate additional data per station and saved to a new table. 

A python program will read the database files over the 12 year period, and generate the trend of the pre-covid period, and examine the impact of the two covid years.

The station with the largest change will be identified.
 
The cleaned, aggregated data will be plotted using matplotlib to show the trends.
  
Conclusion:
Pending.


